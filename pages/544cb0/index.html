<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《Swift编程语言》- 控制流 | zhmbo</title>
    <meta name="generator" content="VuePress 1.5.2">
    <link rel="icon" href="/img/favicon.ico">
    <script src="/js/jquery.min.js"></script>
    <script src="/js/MouseClickEffect.js"></script>
    <script src="/js/FooterFish.js"></script>
    <meta name="description" content="zhmbo的技术博客,专注iOS技术分享,iOS,OC,Objective-C,Swift,SwiftUI,Apple,上架,Flutter,OpenGL,Xcode,Github,RxSwift,算法,架构,面试,zhmbo,zb,ZB,zhmbo,jumbo">
    <meta name="keywords" content="zhmbo,zhmbo,zhangbao,zhmbo的技术博客,个人博客,博客搭建,专注iOS技术分享,iOS,iOS进阶,iOS高级,OC,Objective-C,Swift,SwiftUI,Apple,上架,Flutter,OpenGL,Xcode,RxSwift,UIButton,UITableView,网络请求,Github,GithubActions,算法,架构,面试,zb,ZB,zhmbo,jumbo">
    <meta name="baidu-site-verification" content="code-l7ZsTFnxp5">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.8e525da2.css" as="style"><link rel="preload" href="/assets/js/app.f91ba302.js" as="script"><link rel="preload" href="/assets/js/2.dd713b59.js" as="script"><link rel="preload" href="/assets/js/3.069de0ac.js" as="script"><link rel="preload" href="/assets/js/17.b3336126.js" as="script"><link rel="prefetch" href="/assets/js/10.eca7f202.js"><link rel="prefetch" href="/assets/js/100.884f2e2c.js"><link rel="prefetch" href="/assets/js/101.77e3c5d7.js"><link rel="prefetch" href="/assets/js/102.fbb46419.js"><link rel="prefetch" href="/assets/js/103.4285ab2f.js"><link rel="prefetch" href="/assets/js/104.b9d45e83.js"><link rel="prefetch" href="/assets/js/105.9af86ee7.js"><link rel="prefetch" href="/assets/js/106.f8baee69.js"><link rel="prefetch" href="/assets/js/107.fa4c186a.js"><link rel="prefetch" href="/assets/js/108.155cdba8.js"><link rel="prefetch" href="/assets/js/11.d5dc511b.js"><link rel="prefetch" href="/assets/js/12.126fd524.js"><link rel="prefetch" href="/assets/js/13.31add050.js"><link rel="prefetch" href="/assets/js/14.8f5927ce.js"><link rel="prefetch" href="/assets/js/15.5d73bb50.js"><link rel="prefetch" href="/assets/js/16.b7715387.js"><link rel="prefetch" href="/assets/js/18.f0bd764d.js"><link rel="prefetch" href="/assets/js/19.7f321d7b.js"><link rel="prefetch" href="/assets/js/20.8a704687.js"><link rel="prefetch" href="/assets/js/21.6c9b4fd0.js"><link rel="prefetch" href="/assets/js/22.ce92c244.js"><link rel="prefetch" href="/assets/js/23.cbae088c.js"><link rel="prefetch" href="/assets/js/24.64936988.js"><link rel="prefetch" href="/assets/js/25.6ff36218.js"><link rel="prefetch" href="/assets/js/26.192e5aa3.js"><link rel="prefetch" href="/assets/js/27.5d49847d.js"><link rel="prefetch" href="/assets/js/28.865bfa0a.js"><link rel="prefetch" href="/assets/js/29.652b637f.js"><link rel="prefetch" href="/assets/js/30.2d2405ab.js"><link rel="prefetch" href="/assets/js/31.ff15975d.js"><link rel="prefetch" href="/assets/js/32.319807cb.js"><link rel="prefetch" href="/assets/js/33.b87269c8.js"><link rel="prefetch" href="/assets/js/34.2c88022c.js"><link rel="prefetch" href="/assets/js/35.090f353e.js"><link rel="prefetch" href="/assets/js/36.ef1f9b0b.js"><link rel="prefetch" href="/assets/js/37.ba5ce128.js"><link rel="prefetch" href="/assets/js/38.3c99d047.js"><link rel="prefetch" href="/assets/js/39.20a400e2.js"><link rel="prefetch" href="/assets/js/4.39a2702d.js"><link rel="prefetch" href="/assets/js/40.0f612174.js"><link rel="prefetch" href="/assets/js/41.c39b1818.js"><link rel="prefetch" href="/assets/js/42.73cd76fc.js"><link rel="prefetch" href="/assets/js/43.fec22db6.js"><link rel="prefetch" href="/assets/js/44.24cf9514.js"><link rel="prefetch" href="/assets/js/45.1a7bd4ad.js"><link rel="prefetch" href="/assets/js/46.2772e34b.js"><link rel="prefetch" href="/assets/js/47.b4eeef41.js"><link rel="prefetch" href="/assets/js/48.6e849ea1.js"><link rel="prefetch" href="/assets/js/49.e0c5a13d.js"><link rel="prefetch" href="/assets/js/5.5d94312a.js"><link rel="prefetch" href="/assets/js/50.773364d5.js"><link rel="prefetch" href="/assets/js/51.1db99b25.js"><link rel="prefetch" href="/assets/js/52.8c4dc63b.js"><link rel="prefetch" href="/assets/js/53.ebf1abab.js"><link rel="prefetch" href="/assets/js/54.016f21d7.js"><link rel="prefetch" href="/assets/js/55.73199a2d.js"><link rel="prefetch" href="/assets/js/56.3316e67d.js"><link rel="prefetch" href="/assets/js/57.57c6a9d7.js"><link rel="prefetch" href="/assets/js/58.65589959.js"><link rel="prefetch" href="/assets/js/59.abcabc64.js"><link rel="prefetch" href="/assets/js/6.8a416018.js"><link rel="prefetch" href="/assets/js/60.d382d1c3.js"><link rel="prefetch" href="/assets/js/61.c76620c7.js"><link rel="prefetch" href="/assets/js/62.44f03a5b.js"><link rel="prefetch" href="/assets/js/63.92fa470c.js"><link rel="prefetch" href="/assets/js/64.2475bc0a.js"><link rel="prefetch" href="/assets/js/65.e33c22e2.js"><link rel="prefetch" href="/assets/js/66.b213e189.js"><link rel="prefetch" href="/assets/js/67.54079f5f.js"><link rel="prefetch" href="/assets/js/68.9490fd8d.js"><link rel="prefetch" href="/assets/js/69.c9253eff.js"><link rel="prefetch" href="/assets/js/7.369ac24e.js"><link rel="prefetch" href="/assets/js/70.1c59f92a.js"><link rel="prefetch" href="/assets/js/71.3492471a.js"><link rel="prefetch" href="/assets/js/72.cec16c5f.js"><link rel="prefetch" href="/assets/js/73.50e8862b.js"><link rel="prefetch" href="/assets/js/74.086f16c5.js"><link rel="prefetch" href="/assets/js/75.5554210f.js"><link rel="prefetch" href="/assets/js/76.dfb35acc.js"><link rel="prefetch" href="/assets/js/77.440dde49.js"><link rel="prefetch" href="/assets/js/78.22d12fc4.js"><link rel="prefetch" href="/assets/js/79.7805a9b0.js"><link rel="prefetch" href="/assets/js/8.dd8ea451.js"><link rel="prefetch" href="/assets/js/80.0f6e99d9.js"><link rel="prefetch" href="/assets/js/81.775865b4.js"><link rel="prefetch" href="/assets/js/82.b0a6a6bc.js"><link rel="prefetch" href="/assets/js/83.b4431f89.js"><link rel="prefetch" href="/assets/js/84.9266dd31.js"><link rel="prefetch" href="/assets/js/85.6250c179.js"><link rel="prefetch" href="/assets/js/86.8def8d74.js"><link rel="prefetch" href="/assets/js/87.ae604169.js"><link rel="prefetch" href="/assets/js/88.ea0b4861.js"><link rel="prefetch" href="/assets/js/89.86dbd55a.js"><link rel="prefetch" href="/assets/js/9.d1ab447d.js"><link rel="prefetch" href="/assets/js/90.9225e7d0.js"><link rel="prefetch" href="/assets/js/91.f6bbf533.js"><link rel="prefetch" href="/assets/js/92.a7f31cba.js"><link rel="prefetch" href="/assets/js/93.540860df.js"><link rel="prefetch" href="/assets/js/94.2e3d73ab.js"><link rel="prefetch" href="/assets/js/95.e35292b9.js"><link rel="prefetch" href="/assets/js/96.c8174b05.js"><link rel="prefetch" href="/assets/js/97.f7b36c87.js"><link rel="prefetch" href="/assets/js/98.555706b2.js"><link rel="prefetch" href="/assets/js/99.70b5aa9a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8e525da2.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu have-body-img"><header class="navbar blur"><div class="width-limit"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link"><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/202407311741918.png" alt="zhmbo" class="logo"> <!----></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont jumbo-nav-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><a href="/ios/" class="link-title"><i class="iconfont jumbo-apple"></i>
      iOS
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-apple"></i>
      iOS
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>iOS开发精髓</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3f0170/" class="nav-link"><i class="iconfont undefined"></i>
  介绍
</a></li><li class="dropdown-subitem"><a href="/pages/7354af/" class="nav-link"><i class="iconfont undefined"></i>
  从入门
</a></li><li class="dropdown-subitem"><a href="/pages/1b29d1/" class="nav-link"><i class="iconfont undefined"></i>
  到放弃
</a></li></ul></li><li class="dropdown-item"><h4>iOS充电宝</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cb5f0/" class="nav-link"><i class="iconfont undefined"></i>
  SwiftUI
</a></li><li class="dropdown-subitem"><a href="/pages/9e761f/" class="nav-link"><i class="iconfont undefined"></i>
  iOS14
</a></li><li class="dropdown-subitem"><a href="/pages/5e2170/" class="nav-link"><i class="iconfont undefined"></i>
  Xcode12
</a></li><li class="dropdown-subitem"><a href="/pages/554b82/" class="nav-link"><i class="iconfont undefined"></i>
  iOS周边
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Swift" class="dropdown-title"><a href="/swift/" class="link-title"><i class="iconfont jumbo-swift"></i>
      Swift
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-swift"></i>
      Swift
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/04ed05/" class="nav-link"><i class="iconfont undefined"></i>
  概览
</a></li><li class="dropdown-item"><!----> <a href="/pages/cf2b9a/" class="nav-link"><i class="iconfont undefined"></i>
  欢迎来到Swift
</a></li><li class="dropdown-item"><!----> <a href="/pages/9e2f81/" class="nav-link"><i class="iconfont undefined"></i>
  Swift语法
</a></li><li class="dropdown-item"><!----> <a href="/pages/581348/" class="nav-link"><i class="iconfont undefined"></i>
  语言参考
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title"><i class="iconfont jumbo-jishu"></i>
      技术
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-jishu"></i>
      技术
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4f2c93/" class="nav-link"><i class="iconfont undefined"></i>
  博客
</a></li><li class="dropdown-item"><!----> <a href="/pages/6cbba7/" class="nav-link"><i class="iconfont undefined"></i>
  Github
</a></li><li class="dropdown-item"><!----> <a href="/pages/d9a627/" class="nav-link"><i class="iconfont undefined"></i>
  CocosCreator
</a></li><li class="dropdown-item"><!----> <a href="/pages/9af5e1/" class="nav-link"><i class="iconfont undefined"></i>
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/pages/46944a/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/pages/4b617e/" class="nav-link"><i class="iconfont undefined"></i>
  Android
</a></li><li class="dropdown-item"><!----> <a href="/pages/6ee1a4/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/leaveword/" class="nav-link"><i class="iconfont jumbo-liuyan"></i>
  留言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title"><i class="iconfont jumbo-suoyin"></i>
      索引
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-suoyin"></i>
      索引
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link"><i class="iconfont undefined"></i>
  分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  归档
</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  友链
</a></li><li class="dropdown-item"><!----> <a href="/navigation/" class="nav-link"><i class="iconfont undefined"></i>
  导航
</a></li><li class="dropdown-item"><!----> <a href="/findme/" class="nav-link"><i class="iconfont undefined"></i>
  寻Me
</a></li></ul></div></div> <!----></nav></div></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20200919111632.png"> <div class="blogger-info"><h3>@jumbo</h3> <span>an ios developer</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog/" class="nav-link"><i class="iconfont jumbo-nav-home"></i>
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="iOS" class="dropdown-title"><a href="/ios/" class="link-title"><i class="iconfont jumbo-apple"></i>
      iOS
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-apple"></i>
      iOS
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>iOS开发精髓</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/3f0170/" class="nav-link"><i class="iconfont undefined"></i>
  介绍
</a></li><li class="dropdown-subitem"><a href="/pages/7354af/" class="nav-link"><i class="iconfont undefined"></i>
  从入门
</a></li><li class="dropdown-subitem"><a href="/pages/1b29d1/" class="nav-link"><i class="iconfont undefined"></i>
  到放弃
</a></li></ul></li><li class="dropdown-item"><h4>iOS充电宝</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/pages/5cb5f0/" class="nav-link"><i class="iconfont undefined"></i>
  SwiftUI
</a></li><li class="dropdown-subitem"><a href="/pages/9e761f/" class="nav-link"><i class="iconfont undefined"></i>
  iOS14
</a></li><li class="dropdown-subitem"><a href="/pages/5e2170/" class="nav-link"><i class="iconfont undefined"></i>
  Xcode12
</a></li><li class="dropdown-subitem"><a href="/pages/554b82/" class="nav-link"><i class="iconfont undefined"></i>
  iOS周边
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Swift" class="dropdown-title"><a href="/swift/" class="link-title"><i class="iconfont jumbo-swift"></i>
      Swift
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-swift"></i>
      Swift
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/04ed05/" class="nav-link"><i class="iconfont undefined"></i>
  概览
</a></li><li class="dropdown-item"><!----> <a href="/pages/cf2b9a/" class="nav-link"><i class="iconfont undefined"></i>
  欢迎来到Swift
</a></li><li class="dropdown-item"><!----> <a href="/pages/9e2f81/" class="nav-link"><i class="iconfont undefined"></i>
  Swift语法
</a></li><li class="dropdown-item"><!----> <a href="/pages/581348/" class="nav-link"><i class="iconfont undefined"></i>
  语言参考
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="技术" class="dropdown-title"><a href="/technology/" class="link-title"><i class="iconfont jumbo-jishu"></i>
      技术
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-jishu"></i>
      技术
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/4f2c93/" class="nav-link"><i class="iconfont undefined"></i>
  博客
</a></li><li class="dropdown-item"><!----> <a href="/pages/6cbba7/" class="nav-link"><i class="iconfont undefined"></i>
  Github
</a></li><li class="dropdown-item"><!----> <a href="/pages/d9a627/" class="nav-link"><i class="iconfont undefined"></i>
  CocosCreator
</a></li><li class="dropdown-item"><!----> <a href="/pages/9af5e1/" class="nav-link"><i class="iconfont undefined"></i>
  笔记
</a></li><li class="dropdown-item"><!----> <a href="/pages/46944a/" class="nav-link"><i class="iconfont undefined"></i>
  工具
</a></li><li class="dropdown-item"><!----> <a href="/pages/4b617e/" class="nav-link"><i class="iconfont undefined"></i>
  Android
</a></li><li class="dropdown-item"><!----> <a href="/pages/6ee1a4/" class="nav-link"><i class="iconfont undefined"></i>
  Git
</a></li></ul></div></div><div class="nav-item"><a href="/leaveword/" class="nav-link"><i class="iconfont jumbo-liuyan"></i>
  留言
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title"><i class="iconfont jumbo-suoyin"></i>
      索引
    </a> <span class="title" style="display:none;"><i class="iconfont jumbo-suoyin"></i>
      索引
    </span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link"><i class="iconfont undefined"></i>
  分类
</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link"><i class="iconfont undefined"></i>
  标签
</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link"><i class="iconfont undefined"></i>
  归档
</a></li><li class="dropdown-item"><!----> <a href="/friends/" class="nav-link"><i class="iconfont undefined"></i>
  友链
</a></li><li class="dropdown-item"><!----> <a href="/navigation/" class="nav-link"><i class="iconfont undefined"></i>
  导航
</a></li><li class="dropdown-item"><!----> <a href="/findme/" class="nav-link"><i class="iconfont undefined"></i>
  寻Me
</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/pages/04ed05/" class="sidebar-link">概览</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>欢迎来到Swift</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Swift语法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/9e2f81/" class="sidebar-link">基础知识</a></li><li><a href="/pages/279dd7/" class="sidebar-link">基本运算符</a></li><li><a href="/pages/2850e8/" class="sidebar-link">字符串和字符</a></li><li><a href="/pages/4b4c78/" class="sidebar-link">集合类型</a></li><li><a href="/pages/544cb0/" aria-current="page" class="active sidebar-link">控制流</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/544cb0/#for-in-循环" class="sidebar-link">For-In 循环</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#while-循环" class="sidebar-link">While 循环</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/544cb0/#while" class="sidebar-link">While</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#repeat-while" class="sidebar-link">Repeat-While</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#条件语句" class="sidebar-link">条件语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/544cb0/#if" class="sidebar-link">If</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#switch" class="sidebar-link">Switch</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#控制转移语句" class="sidebar-link">控制转移语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/544cb0/#continue" class="sidebar-link">Continue</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#break" class="sidebar-link">Break</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#贯穿（fallthrough）" class="sidebar-link">贯穿（Fallthrough）</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#带标签的语句" class="sidebar-link">带标签的语句</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#提前退出" class="sidebar-link">提前退出</a></li><li class="sidebar-sub-header"><a href="/pages/544cb0/#检测-api-可用性" class="sidebar-link">检测 API 可用性</a></li></ul></li><li><a href="/pages/b69d99/" class="sidebar-link">函数</a></li><li><a href="/pages/7904a7/" class="sidebar-link">闭包</a></li><li><a href="/pages/56276f/" class="sidebar-link">枚举</a></li><li><a href="/pages/0641bb/" class="sidebar-link">类和结构体</a></li><li><a href="/pages/ce0459/" class="sidebar-link">属性</a></li><li><a href="/pages/efc653/" class="sidebar-link">方法</a></li><li><a href="/pages/e35887/" class="sidebar-link">下标</a></li><li><a href="/pages/09b0f4/" class="sidebar-link">继承</a></li><li><a href="/pages/1b072a/" class="sidebar-link">构造过程</a></li><li><a href="/pages/c40911/" class="sidebar-link">解析过程</a></li><li><a href="/pages/96b368/" class="sidebar-link">可选链</a></li><li><a href="/pages/cc5b2d/" class="sidebar-link">错误处理</a></li><li><a href="/pages/757c02/" class="sidebar-link">类型转换</a></li><li><a href="/pages/1d43f5/" class="sidebar-link">嵌套类型</a></li><li><a href="/pages/297d1c/" class="sidebar-link">扩展</a></li><li><a href="/pages/82f958/" class="sidebar-link">协议</a></li><li><a href="/pages/0d8a5e/" class="sidebar-link">泛型</a></li><li><a href="/pages/46ff18/" class="sidebar-link">不透明类型</a></li><li><a href="/pages/51a2dd/" class="sidebar-link">自动引用计数</a></li><li><a href="/pages/9224f8/" class="sidebar-link">内存安全</a></li><li><a href="/pages/6c25a0/" class="sidebar-link">访问控制</a></li><li><a href="/pages/9854b9/" class="sidebar-link">高级运算符</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>语言参考</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"> <div class="theme-vdoing-wrapper bg-style-1"><div class="articleInfo-wrap" data-v-7e90c5a4><div class="articleInfo" data-v-7e90c5a4><ul class="breadcrumbs" data-v-7e90c5a4><li data-v-7e90c5a4><a href="/" title="首页" class="iconfont jumbo-home router-link-active" data-v-7e90c5a4></a></li> <li data-v-7e90c5a4><a href="/categories/?category=Swift%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80" title="分类" data-v-7e90c5a4>Swift编程语言</a></li> <li data-v-7e90c5a4><a href="/categories/?category=Swift%E8%AF%AD%E6%B3%95" title="分类" data-v-7e90c5a4>Swift语法</a></li></ul> <div class="info" data-v-7e90c5a4><div title="作者" class="author iconfont jumbo-author" data-v-7e90c5a4><a href="https://github.com/zhmbo" target="_blank" title="作者" class="beLink" data-v-7e90c5a4>zhmbo</a></div> <div title="创建时间" class="date iconfont jumbo-time" data-v-7e90c5a4><a href="javascript:;" data-v-7e90c5a4>2020-11-10</a></div> <div title="统计" class="date iconfont jumbo-eye" data-v-7e90c5a4><span id="/pages/544cb0/" data-flag-title="《Swift编程语言》- 控制流" class="leancloud-visitors" data-v-7e90c5a4><a class="leancloud-visitors-count" style="font-size:.7rem;font-weight:normal;color:#999;"></a></span></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          《Swift编程语言》- 控制流
        </h1> <div class="theme-vdoing-content content__default"><p>Swift 提供了多种流程控制结构，包括可以多次执行任务的 <code>while</code> 循环，基于特定条件选择执行不同代码分支的 <code>if</code>、<code>guard</code> 和 <code>switch</code> 语句，还有控制流程跳转到其他代码位置的 <code>break</code> 和 <code>continue</code> 语句。</p> <p>Swift 还提供了 <code>for-in</code> 循环，用来更简单地遍历数组（Array），字典（Dictionary），区间（Range），字符串（String）和其他序列类型。</p> <p>Swift 的 <code>switch</code> 语句比许多类 C 语言要更加强大。case 还可以匹配很多不同的模式，包括范围匹配，元组（tuple）和特定类型匹配。<code>switch</code> 语句的 case 中匹配的值可以声明为临时常量或变量，在 case 作用域内使用，也可以配合 <code>where</code> 来描述更复杂的匹配条件。</p> <h2 id="for-in-循环"><a href="#for-in-循环" class="header-anchor">#</a> For-In 循环</h2> <p>你可以使用 <code>for-in</code> 循环来遍历一个集合中的所有元素，例如数组中的元素、范围内的数字或者字符串中的字符。</p> <p>以下例子使用 <code>for-in</code> 遍历一个数组所有元素：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> names <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;Anna&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Alex&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Brian&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;Jack&quot;</span></span><span class="token punctuation">]</span>
<span class="token keyword">for</span> name <span class="token keyword">in</span> names <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// Hello, Anna!</span>
<span class="token comment">// Hello, Alex!</span>
<span class="token comment">// Hello, Brian!</span>
<span class="token comment">// Hello, Jack!</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>你也可以通过遍历一个字典来访问它的键值对。遍历字典时，字典的每项元素会以 <code>(key, value)</code> 元组的形式返回，你可以在 <code>for-in</code> 循环中使用显式的常量名称来解读 <code>(key, value)</code> 元组。下面的例子中，字典的键会声明为 <code>animalName</code> 常量，字典的值会声明为 <code>legCount</code> 常量：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> numberOfLegs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;spider&quot;</span></span><span class="token punctuation">:</span> <span class="token number">8</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;ant&quot;</span></span><span class="token punctuation">:</span> <span class="token number">6</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;cat&quot;</span></span><span class="token punctuation">:</span> <span class="token number">4</span><span class="token punctuation">]</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>animalName<span class="token punctuation">,</span> legCount<span class="token punctuation">)</span> <span class="token keyword">in</span> numberOfLegs <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">animalName</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">s have </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">legCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> legs&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// cats have 4 legs</span>
<span class="token comment">// ants have 6 legs</span>
<span class="token comment">// spiders have 8 legs</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>字典的内容理论上是无序的，遍历元素时的顺序是无法确定的。将元素插入字典的顺序并不会决定它们被遍历的顺序。关于数组和字典的细节，参见 <a href="/pages/4b4c78/">集合类型</a>。</p> <p><code>for-in</code> 循环还可以使用数字范围。下面的例子用来输出乘法表的一部分内容：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">for</span> index <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">...</span><span class="token number">5</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> times 5 is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">index <span class="token operator">*</span> <span class="token number">5</span></span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 1 times 5 is 5</span>
<span class="token comment">// 2 times 5 is 10</span>
<span class="token comment">// 3 times 5 is 15</span>
<span class="token comment">// 4 times 5 is 20</span>
<span class="token comment">// 5 times 5 is 25</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>例子中用来进行遍历的元素是使用闭区间操作符（<code>...</code>）表示的从 <code>1</code> 到 <code>5</code> 的数字区间。<code>index</code> 被赋值为闭区间中的第一个数字（<code>1</code>），然后循环中的语句被执行一次。在本例中，这个循环只包含一个语句，用来输出当前 <code>index</code> 值所对应的乘 5 乘法表的结果。该语句执行后，<code>index</code> 的值被更新为闭区间中的第二个数字（<code>2</code>），之后 <code>print(_:separator:terminator:)</code> 函数会再执行一次。整个过程会进行到闭区间结尾为止。</p> <p>上面的例子中，<code>index</code> 是一个每次循环遍历开始时被自动赋值的常量。这种情况下，<code>index</code> 在使用前不需要声明，只需要将它包含在循环的声明中，就可以对其进行隐式声明，而无需使用 <code>let</code> 关键字声明。</p> <p>如果你不需要区间序列内每一项的值，你可以使用下划线（<code>_</code>）替代变量名来忽略这个值：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> base <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">let</span> power <span class="token operator">=</span> <span class="token number">10</span>
<span class="token keyword">var</span> answer <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">for</span> <span class="token omit keyword">_</span> <span class="token keyword">in</span> <span class="token number">1</span><span class="token operator">...</span>power <span class="token punctuation">{</span>
    answer <span class="token operator">*=</span> base
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">base</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> to the power of </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">power</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">answer</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token comment">// 输出“3 to the power of 10 is 59049”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这个例子计算 base 这个数的 power 次幂（本例中，是 <code>3</code> 的 <code>10</code> 次幂），从 <code>1</code>（<code>3</code> 的 <code>0</code> 次幂）开始做 <code>3</code> 的乘法， 进行 <code>10</code> 次，使用 <code>1</code> 到 <code>10</code> 的闭区间循环。这个计算并不需要知道每一次循环中计数器具体的值，只需要执行了正确的循环次数即可。下划线符号 <code>_</code> （替代循环中的变量）能够忽略当前值，并且不提供循环遍历时对值的访问。</p> <p>在某些情况下，你可能不想使用包括两个端点的闭区间。想象一下，你在一个手表上绘制分钟的刻度线。总共 <code>60</code> 个刻度，从 <code>0</code> 分开始。使用半开区间运算符（<code>..&lt;</code>）来表示一个左闭右开的区间。有关区间的更多信息，请参阅 <a href="/pages/279dd7/#区间运算符（range-operators）">区间运算符</a>。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> minutes <span class="token operator">=</span> <span class="token number">60</span>
<span class="token keyword">for</span> tickMark <span class="token keyword">in</span> <span class="token number">0</span><span class="token operator">..&lt;</span>minutes <span class="token punctuation">{</span>
    <span class="token comment">// 每一分钟都渲染一个刻度线（60次）</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>一些用户可能在其 UI 中可能需要较少的刻度。他们可以每 5 分钟作为一个刻度。使用 <code>stride(from:to:by:)</code> 函数跳过不需要的标记。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> minuteInterval <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">for</span> tickMark <span class="token keyword">in</span> <span class="token function">stride</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> to<span class="token punctuation">:</span> minutes<span class="token punctuation">,</span> by<span class="token punctuation">:</span> minuteInterval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每5分钟渲染一个刻度线（0, 5, 10, 15 ... 45, 50, 55）</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>可以在闭区间使用 <code>stride(from:through:by:)</code> 起到同样作用：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> hours <span class="token operator">=</span> <span class="token number">12</span>
<span class="token keyword">let</span> hourInterval <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">for</span> tickMark <span class="token keyword">in</span> <span class="token function">stride</span><span class="token punctuation">(</span>from<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span> through<span class="token punctuation">:</span> hours<span class="token punctuation">,</span> by<span class="token punctuation">:</span> hourInterval<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 每3小时渲染一个刻度线（3, 6, 9, 12）</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="while-循环"><a href="#while-循环" class="header-anchor">#</a> While 循环</h2> <p><code>while</code> 循环会一直运行一段语句直到条件变成 <code>false</code>。这类循环适合使用在第一次迭代前，迭代次数未知的情况下。Swift 提供两种 <code>while</code> 循环形式：</p> <ul><li><code>while</code> 循环，每次在循环开始时计算条件是否符合；</li> <li><code>repeat-while</code> 循环，每次在循环结束时计算条件是否符合。</li></ul> <h3 id="while"><a href="#while" class="header-anchor">#</a> While</h3> <p><code>while</code> 循环从计算一个条件开始。如果条件为 <code>true</code>，会重复运行一段语句，直到条件变为 <code>false</code>。</p> <p>下面是 <code>while</code> 循环的一般格式：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">while</span> condition <span class="token punctuation">{</span>
    statements
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面的例子来玩一个叫做<em>蛇和梯子</em>（也叫做<em>滑道和梯子</em>）的小游戏：</p> <p><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20201110183103.png" alt="img"></p> <p>游戏的规则如下：</p> <ul><li>游戏盘面包括 25 个方格，游戏目标是达到或者超过第 25 个方格；</li> <li>每一轮，你通过掷一个六面体骰子来确定你移动方块的步数，移动的路线由上图中横向的虚线所示；</li> <li>如果在某轮结束，你移动到了梯子的底部，可以顺着梯子爬上去；</li> <li>如果在某轮结束，你移动到了蛇的头部，你会顺着蛇的身体滑下去。</li></ul> <p>游戏盘面可以使用一个 <code>Int</code> 数组来表达。数组的长度由一个 <code>finalSquare</code> 常量储存，用来初始化数组和检测最终胜利条件。游戏盘面由 26 个 <code>Int</code> 0 值初始化，而不是 25 个（由 <code>0</code> 到 <code>25</code>，一共 26 个）：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> finalSquare <span class="token operator">=</span> <span class="token number">25</span>
<span class="token keyword">var</span> board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span>repeating<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> finalSquare <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>一些方格被设置成特定的值来表示有蛇或者梯子。梯子底部的方格是一个正值，使你可以向上移动，蛇头处的方格是一个负值，会让你向下移动：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>board<span class="token punctuation">[</span><span class="token number">03</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">08</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">06</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">09</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">09</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">02</span>
board<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">02</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">08</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>3 号方格是梯子的底部，会让你向上移动到 11 号方格，我们使用 <code>board[03]</code> 等于 <code>+08</code>（来表示 <code>11</code> 和 <code>3</code> 之间的差值）。为了对齐语句，这里使用了一元正运算符（<code>+i</code>）和一元负运算符（<code>-i</code>），并且小于 10 的数字都使用 0 补齐（这些语法的技巧不是必要的，只是为了让代码看起来更加整洁）。</p> <p>玩家由左下角空白处编号为 0 的方格开始游戏。玩家第一次掷骰子后才会进入游戏盘面：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">var</span> diceRoll <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">while</span> square <span class="token operator">&lt;</span> finalSquare <span class="token punctuation">{</span>
    <span class="token comment">// 掷骰子</span>
    diceRoll <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> diceRoll <span class="token operator">==</span> <span class="token number">7</span> <span class="token punctuation">{</span> diceRoll <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
    <span class="token comment">// 根据点数移动</span>
    square <span class="token operator">+=</span> diceRoll
    <span class="token keyword">if</span> square <span class="token operator">&lt;</span> board<span class="token punctuation">.</span>count <span class="token punctuation">{</span>
        <span class="token comment">// 如果玩家还在棋盘上，顺着梯子爬上去或者顺着蛇滑下去</span>
        square <span class="token operator">+=</span> board<span class="token punctuation">[</span>square<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Game over!&quot;</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>本例中使用了最简单的方法来模拟掷骰子。<code>diceRoll</code> 的值并不是一个随机数，而是以 <code>0</code> 为初始值，之后每一次 <code>while</code> 循环，<code>diceRoll</code> 的值增加 1 ，然后检测是否超出了最大值。当 <code>diceRoll</code> 的值等于 7 时，就超过了骰子的最大值，会被重置为 <code>1</code>。所以 <code>diceRoll</code> 的取值顺序会一直是 <code>1</code>，<code>2</code>，<code>3</code>，<code>4</code>，<code>5</code>，<code>6</code>，<code>1</code>，<code>2</code> 等。</p> <p>掷完骰子后，玩家向前移动 <code>diceRoll</code> 个方格，如果玩家移动超过了第 25 个方格，这个时候游戏将会结束，为了应对这种情况，代码会首先判断 <code>square</code> 的值是否小于 <code>board</code> 的 <code>count</code> 属性，只有小于才会在 <code>board[square]</code> 上增加 <code>square</code>，来向前或向后移动（遇到了梯子或者蛇）。</p> <blockquote><p>注意</p> <p>如果没有这个检测（<code>square &lt; board.count</code>），<code>board[square]</code> 可能会越界访问 <code>board</code> 数组，导致运行时错误。</p></blockquote> <p>当本轮 <code>while</code> 循环运行完毕，会再检测循环条件是否需要再运行一次循环。如果玩家移动到或者超过第 25 个方格，循环条件结果为 <code>false</code>，此时游戏结束。</p> <p><code>while</code> 循环比较适合本例中的这种情况，因为在 <code>while</code> 循环开始时，我们并不知道游戏要跑多久，只有在达成指定条件时循环才会结束。</p> <h3 id="repeat-while"><a href="#repeat-while" class="header-anchor">#</a> Repeat-While</h3> <p><code>while</code> 循环的另外一种形式是 <code>repeat-while</code>，它和 <code>while</code> 的区别是在判断循环条件之前，先执行一次循环的代码块。然后重复循环直到条件为 <code>false</code>。</p> <blockquote><p>注意</p> <p>Swift 语言的 <code>repeat-while</code> 循环和其他语言中的 <code>do-while</code> 循环是类似的。</p></blockquote> <p>下面是 <code>repeat-while</code> 循环的一般格式：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">repeat</span> <span class="token punctuation">{</span>
    statements
<span class="token punctuation">}</span> <span class="token keyword">while</span> condition
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>还是<em>蛇和梯子</em>的游戏，使用 <code>repeat-while</code> 循环来替代 <code>while</code> 循环。<code>finalSquare</code>、<code>board</code>、<code>square</code> 和 <code>diceRoll</code> 的值初始化同 <code>while</code> 循环时一样：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> finalSquare <span class="token operator">=</span> <span class="token number">25</span>
<span class="token keyword">var</span> board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span>repeating<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> finalSquare <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
board<span class="token punctuation">[</span><span class="token number">03</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">08</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">06</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">09</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">09</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">02</span>
board<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">02</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">08</span>
<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">var</span> diceRoll <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><code>repeat-while</code> 的循环版本，循环中<em>第一步</em>就需要去检测是否在梯子或者蛇的方块上。没有梯子会让玩家直接上到第 25 个方格，所以玩家不会通过梯子直接赢得游戏。这样在循环开始时先检测是否踩在梯子或者蛇上是安全的。</p> <p>游戏开始时，玩家在第 0 个方格上，<code>board[0]</code> 一直等于 0， 不会有什么影响：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">repeat</span> <span class="token punctuation">{</span>
    <span class="token comment">// 顺着梯子爬上去或者顺着蛇滑下去</span>
    square <span class="token operator">+=</span> board<span class="token punctuation">[</span>square<span class="token punctuation">]</span>
    <span class="token comment">// 掷骰子</span>
    diceRoll <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> diceRoll <span class="token operator">==</span> <span class="token number">7</span> <span class="token punctuation">{</span> diceRoll <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
    <span class="token comment">// 根据点数移动</span>
    square <span class="token operator">+=</span> diceRoll
<span class="token punctuation">}</span> <span class="token keyword">while</span> square <span class="token operator">&lt;</span> finalSquare
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Game over!&quot;</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>检测完玩家是否踩在梯子或者蛇上之后，开始掷骰子，然后玩家向前移动 <code>diceRoll</code> 个方格，本轮循环结束。</p> <p>循环条件（<code>while square &lt; finalSquare</code>）和 <code>while</code> 方式相同，但是只会在循环结束后进行计算。在这个游戏中，<code>repeat-while</code> 表现得比 <code>while</code> 循环更好。<code>repeat-while</code> 方式会在条件判断 <code>square</code> 没有超出后直接运行 <code>square += board[square]</code>，这种方式可以比起前面 <code>while</code> 循环的版本，可以省去数组越界的检查。</p> <h2 id="条件语句"><a href="#条件语句" class="header-anchor">#</a> 条件语句</h2> <p>根据特定的条件执行特定的代码通常是十分有用的。当错误发生时，你可能想运行额外的代码；或者，当值太大或太小时，向用户显示一条消息。要实现这些功能，你就需要使用<em>条件语句</em>。</p> <p>Swift 提供两种类型的条件语句：<code>if</code> 语句和 <code>switch</code> 语句。通常，当条件较为简单且可能的情况很少时，使用 <code>if</code> 语句。而 <code>switch</code> 语句更适用于条件较复杂、有更多排列组合的时候。并且 <code>switch</code> 在需要用到模式匹配（pattern-matching）的情况下会更有用。</p> <h3 id="if"><a href="#if" class="header-anchor">#</a> If</h3> <p><code>if</code> 语句最简单的形式就是只包含一个条件，只有该条件为 <code>true</code> 时，才执行相关代码：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">var</span> temperatureInFahrenheit <span class="token operator">=</span> <span class="token number">30</span>
<span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&lt;=</span> <span class="token number">32</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's very cold. Consider wearing a scarf.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“It's very cold. Consider wearing a scarf.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上面的例子会判断温度是否小于等于 32 华氏度（水的冰点）。如果是，则打印一条消息；否则，不打印任何消息，继续执行 <code>if</code> 块后面的代码。</p> <p>当然，<code>if</code> 语句允许二选一执行，叫做 <code>else</code> 从句。也就是当条件为 <code>false</code> 时，执行 <em>else 语句</em>：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>temperatureInFahrenheit <span class="token operator">=</span> <span class="token number">40</span>
<span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&lt;=</span> <span class="token number">32</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's very cold. Consider wearing a scarf.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's not that cold. Wear a t-shirt.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“It's not that cold. Wear a t-shirt.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>显然，这两条分支中总有一条会被执行。由于温度已升至 40 华氏度，不算太冷，没必要再围围巾。因此，<code>else</code> 分支就被触发了。</p> <p>你可以把多个 <code>if</code> 语句链接在一起，来实现更多分支：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>temperatureInFahrenheit <span class="token operator">=</span> <span class="token number">90</span>
<span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&lt;=</span> <span class="token number">32</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's very cold. Consider wearing a scarf.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&gt;=</span> <span class="token number">86</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's really warm. Don't forget to wear sunscreen.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's not that cold. Wear a t-shirt.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“It's really warm. Don't forget to wear sunscreen.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>在上面的例子中，额外的 <code>if</code> 语句用于判断是不是特别热。而最后的 <code>else</code> 语句被保留了下来，用于打印既不冷也不热时的消息。</p> <p>实际上，当不需要完整判断情况的时候，最后的 <code>else</code> 语句是可选的：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code>temperatureInFahrenheit <span class="token operator">=</span> <span class="token number">72</span>
<span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&lt;=</span> <span class="token number">32</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's very cold. Consider wearing a scarf.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> temperatureInFahrenheit <span class="token operator">&gt;=</span> <span class="token number">86</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;It's really warm. Don't forget to wear sunscreen.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>在这个例子中，由于既不冷也不热，所以不会触发 <code>if</code> 或 <code>else if</code> 分支，也就不会打印任何消息。</p> <h3 id="switch"><a href="#switch" class="header-anchor">#</a> Switch</h3> <p><code>switch</code> 语句会尝试把某个值与若干个模式（pattern）进行匹配。根据第一个匹配成功的模式，<code>switch</code> 语句会执行对应的代码。当有可能的情况较多时，通常用 <code>switch</code> 语句替换 <code>if</code> 语句。</p> <p><code>switch</code> 语句最简单的形式就是把某个值与一个或若干个相同类型的值作比较：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">switch</span> <span class="token keyword">some</span> value to consider <span class="token punctuation">{</span>
<span class="token keyword">case</span> value <span class="token number">1</span><span class="token punctuation">:</span>
    respond to value <span class="token number">1</span>
<span class="token keyword">case</span> value <span class="token number">2</span><span class="token punctuation">,</span>
    value <span class="token number">3</span><span class="token punctuation">:</span>
    respond to value <span class="token number">2</span> or <span class="token number">3</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    otherwise<span class="token punctuation">,</span> <span class="token keyword">do</span> something <span class="token keyword">else</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><code>switch</code> 语句由<em>多个 case</em> 构成，每个由 <code>case</code> 关键字开始。为了匹配某些更特定的值，Swift 提供了几种方法来进行更复杂的模式匹配，这些模式将在本节的稍后部分提到。</p> <p>与 <code>if</code> 语句类似，每一个 case 都是代码执行的一条分支。<code>switch</code> 语句会决定哪一条分支应该被执行，这个流程被称作根据给定的值<em>切换（switching）</em> 。</p> <p><code>switch</code> 语句必须是完备的。这就是说，每一个可能的值都必须至少有一个 case 分支与之对应。在某些不可能涵盖所有值的情况下，你可以使用默认（<code>default</code>）分支来涵盖其它所有没有对应的值，这个默认分支必须在 <code>switch</code> 语句的最后面。</p> <p>下面的例子使用 <code>switch</code> 语句来匹配一个名为 <code>someCharacter</code> 的小写字符：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> someCharacter<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;z&quot;</span></span>
<span class="token keyword">switch</span> someCharacter <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The first letter of the alphabet&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;z&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The last letter of the alphabet&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Some other character&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“The last letter of the alphabet”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在这个例子中，第一个 case 分支用于匹配第一个英文字母 <code>a</code>，第二个 case 分支用于匹配最后一个字母 <code>z</code>。因为 <code>switch</code> 语句必须有一个 case 分支用于覆盖所有可能的字符，而不仅仅是所有的英文字母，所以 switch 语句使用 <code>default</code> 分支来匹配除了 <code>a</code> 和 <code>z</code> 外的所有值，这个分支保证了 switch 语句的完备性。</p> <h4 id="不存在隐式的贯穿"><a href="#不存在隐式的贯穿" class="header-anchor">#</a> 不存在隐式的贯穿</h4> <p>与 C 和 Objective-C 中的 <code>switch</code> 语句不同，在 Swift 中，当匹配的 case 分支中的代码执行完毕后，程序会终止 <code>switch</code> 语句，而不会继续执行下一个 case 分支。这也就是说，不需要在 case 分支中显式地使用 <code>break</code> 语句。这使得 <code>switch</code> 语句更安全、更易用，也避免了漏写 <code>break</code> 语句导致多个语言被执行的错误。</p> <blockquote><p>注意</p> <p>虽然在 Swift 中 <code>break</code> 不是必须的，但你依然可以在 case 分支中的代码执行完毕前使用 <code>break</code> 跳出，详情请参见 <a href="#switch-%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84-break">Switch 语句中的 break</a>。</p></blockquote> <p>每一个 case 分支都<em>必须</em>包含至少一条语句。像下面这样书写代码是无效的，因为第一个 case 分支是空的：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> anotherCharacter<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span>
<span class="token keyword">switch</span> anotherCharacter <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span><span class="token punctuation">:</span> <span class="token comment">// 无效，这个分支下面没有语句</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;A&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The letter A&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Not the letter A&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 这段代码会报编译错误</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>不像 C 语言里的 <code>switch</code> 语句，在 Swift 中，<code>switch</code> 语句不会一起匹配 <code>&quot;a&quot;</code> 和 <code>&quot;A&quot;</code>。相反的，上面的代码会引起编译期错误：<code>case &quot;a&quot;: 不包含任何可执行语句</code>——这就避免了意外地从一个 case 分支贯穿到另外一个，使得代码更安全、也更直观。</p> <p>为了让单个 case 同时匹配 <code>a</code> 和 <code>A</code>，可以将这个两个值组合成一个复合匹配，并且用逗号分开：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> anotherCharacter<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span>
<span class="token keyword">switch</span> anotherCharacter <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;A&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The letter A&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Not the letter A&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“The letter A”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>为了可读性，符合匹配可以写成多行形式，详情请参考 <a href="#%E5%A4%8D%E5%90%88%E5%9E%8B-cases">复合匹配</a>。</p> <blockquote><p>注意</p> <p>如果想要显式贯穿 case 分支，请使用 <code>fallthrough</code> 语句，详情请参考 <a href="#%E8%B4%AF%E7%A9%BF%EF%BC%88fallthrough%EF%BC%89">贯穿</a>。</p></blockquote> <h4 id="区间匹配"><a href="#区间匹配" class="header-anchor">#</a> 区间匹配</h4> <p>case 分支的模式也可以是一个值的区间。下面的例子展示了如何使用区间匹配来输出任意数字对应的自然语言格式：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> approximateCount <span class="token operator">=</span> <span class="token number">62</span>
<span class="token keyword">let</span> countedThings <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;moons orbiting Saturn&quot;</span></span>
<span class="token keyword">let</span> naturalCount<span class="token punctuation">:</span> <span class="token class-name">String</span>
<span class="token keyword">switch</span> approximateCount <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">0</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;no&quot;</span></span>
<span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">..&lt;</span><span class="token number">5</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;a few&quot;</span></span>
<span class="token keyword">case</span> <span class="token number">5</span><span class="token operator">..&lt;</span><span class="token number">12</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;several&quot;</span></span>
<span class="token keyword">case</span> <span class="token number">12</span><span class="token operator">..&lt;</span><span class="token number">100</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;dozens of&quot;</span></span>
<span class="token keyword">case</span> <span class="token number">100</span><span class="token operator">..&lt;</span><span class="token number">1000</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;hundreds of&quot;</span></span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    naturalCount <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;many&quot;</span></span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;There are </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">naturalCount</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">countedThings</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span>
<span class="token comment">// 输出“There are dozens of moons orbiting Saturn.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>在上例中，<code>approximateCount</code> 在一个 <code>switch</code> 声明中被评估。每一个 <code>case</code> 都与之进行比较。因为 <code>approximateCount</code> 落在了 12 到 100 的区间，所以 <code>naturalCount</code> 等于 <code>&quot;dozens of&quot;</code> 值，并且此后的执行跳出了 <code>switch</code> 语句。</p> <h4 id="元组"><a href="#元组" class="header-anchor">#</a> 元组</h4> <p>我们可以使用元组在同一个 <code>switch</code> 语句中测试多个值。元组中的元素可以是值，也可以是区间。另外，使用下划线（<code>_</code>）来匹配所有可能的值。</p> <p>下面的例子展示了如何使用一个 <code>(Int, Int)</code> 类型的元组来分类下图中的点 (x, y)：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> somePoint <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">switch</span> somePoint <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">somePoint</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is at the origin&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token omit keyword">_</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">somePoint</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is on the x-axis&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token omit keyword">_</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">somePoint</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is on the y-axis&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">2</span><span class="token operator">...</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token operator">...</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">somePoint</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is inside the box&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">somePoint</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is outside of the box&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“(1, 1) is inside the box”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20201110183121.png" alt="img"></p> <p>image</p> <p>在上面的例子中，<code>switch</code> 语句会判断某个点是否是原点 (0, 0)，是否在红色的 x 轴上，是否在橘黄色的 y 轴上，是否在一个以原点为中心的4x4的蓝色矩形里，或者在这个矩形外面。</p> <p>不像 C 语言，Swift 允许多个 case 匹配同一个值。实际上，在这个例子中，点 (0, 0)可以匹配所有<em>四个 case</em>。但是，如果存在多个匹配，那么只会执行第一个被匹配到的 case 分支。考虑点 (0, 0)会首先匹配 <code>case (0, 0)</code>，因此剩下的能够匹配的分支都会被忽视掉。</p> <h4 id="值绑定（value-bindings）"><a href="#值绑定（value-bindings）" class="header-anchor">#</a> 值绑定（Value Bindings）</h4> <p>case 分支允许将匹配的值声明为临时常量或变量，并且在 case 分支体内使用 —— 这种行为被称为<em>值绑定</em>（value binding），因为匹配的值在 case 分支体内，与临时的常量或变量绑定。</p> <p>下面的例子将下图中的点 (x, y)，使用 <code>(Int, Int)</code> 类型的元组表示，然后分类表示：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> anotherPoint <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">switch</span> anotherPoint <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token keyword">let</span> x<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;on the x-axis with an x value of </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">let</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;on the y-axis with a y value of </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;somewhere else at (</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“on the x-axis with an x value of 2”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20201110183128.png" alt="img"></p> <p>image</p> <p>在上面的例子中，<code>switch</code> 语句会判断某个点是否在红色的 x 轴上，是否在橘黄色的 y 轴上，或者不在坐标轴上。</p> <p>这三个 case 都声明了常量 <code>x</code> 和 <code>y</code> 的占位符，用于临时获取元组 <code>anotherPoint</code> 的一个或两个值。第一个 case ——<code>case (let x, 0)</code> 将匹配一个纵坐标为 <code>0</code> 的点，并把这个点的横坐标赋给临时的常量 <code>x</code>。类似的，第二个 case ——<code>case (0, let y)</code> 将匹配一个横坐标为 <code>0</code> 的点，并把这个点的纵坐标赋给临时的常量 <code>y</code>。</p> <p>一旦声明了这些临时的常量，它们就可以在其对应的 case 分支里使用。在这个例子中，它们用于打印给定点的类型。</p> <p>请注意，这个 <code>switch</code> 语句不包含默认分支。这是因为最后一个 case ——<code>case let(x, y)</code> 声明了一个可以匹配余下所有值的元组。这使得 <code>switch</code> 语句已经完备了，因此不需要再书写默认分支。</p> <h4 id="where"><a href="#where" class="header-anchor">#</a> Where</h4> <p>case 分支的模式可以使用 <code>where</code> 语句来判断额外的条件。</p> <p>下面的例子把下图中的点 (x, y)进行了分类：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> yetAnotherPoint <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">switch</span> yetAnotherPoint <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">where</span> x <span class="token operator">==</span> y<span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;(</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is on the line x == y&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span> <span class="token keyword">where</span> x <span class="token operator">==</span> <span class="token operator">-</span>y<span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;(</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is on the line x == -y&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token keyword">let</span> <span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;(</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">x</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">y</span><span class="token interpolation-punctuation punctuation">)</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is just some arbitrary point&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“(1, -1) is on the line x == -y”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20201110183138.png" alt="img"></p> <p>image</p> <p>在上面的例子中，<code>switch</code> 语句会判断某个点是否在绿色的对角线 <code>x == y</code> 上，是否在紫色的对角线 <code>x == -y</code> 上，或者不在对角线上。</p> <p>这三个 case 都声明了常量 <code>x</code> 和 <code>y</code> 的占位符，用于临时获取元组 <code>yetAnotherPoint</code> 的两个值。这两个常量被用作 <code>where</code> 语句的一部分，从而创建一个动态的过滤器（filter）。当且仅当 <code>where</code> 语句的条件为 <code>true</code> 时，匹配到的 case 分支才会被执行。</p> <p>就像是值绑定中的例子，由于最后一个 case 分支匹配了余下所有可能的值，<code>switch</code> 语句就已经完备了，因此不需要再书写默认分支。</p> <h4 id="复合型-cases"><a href="#复合型-cases" class="header-anchor">#</a> 复合型 Cases</h4> <p>当多个条件可以使用同一种方法来处理时，可以将这几种可能放在同一个 <code>case</code> 后面，并且用逗号隔开。当 case 后面的任意一种模式匹配的时候，这条分支就会被匹配。并且，如果匹配列表过长，还可以分行书写：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> someCharacter<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;e&quot;</span></span>
<span class="token keyword">switch</span> someCharacter <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;e&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;i&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;o&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;u&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">someCharacter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a vowel&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;b&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;c&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;d&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;f&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;g&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;h&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;j&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;k&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;l&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;m&quot;</span></span><span class="token punctuation">,</span>
     <span class="token string-literal"><span class="token string">&quot;n&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;p&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;q&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;r&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;s&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;t&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;v&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;w&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;x&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;y&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;z&quot;</span></span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">someCharacter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is a consonant&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;</span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">someCharacter</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is not a vowel or a consonant&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“e is a vowel”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这个 <code>switch</code> 语句中的第一个 case，匹配了英语中的五个小写元音字母。相似的，第二个 case 匹配了英语中所有的小写辅音字母。最终，<code>default</code> 分支匹配了其它所有字符。</p> <p>复合匹配同样可以包含值绑定。复合匹配里所有的匹配模式，都必须包含相同的值绑定。并且每一个绑定都必须获取到相同类型的值。这保证了，无论复合匹配中的哪个模式发生了匹配，分支体内的代码，都能获取到绑定的值，并且绑定的值都有一样的类型。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> stillAnotherPoint <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token keyword">switch</span> stillAnotherPoint <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token punctuation">(</span><span class="token keyword">let</span> distance<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">let</span> distance<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;On an axis, </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">distance</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> from the origin&quot;</span></span><span class="token punctuation">)</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Not on an axis&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“On an axis, 9 from the origin”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>上面的 case 有两个模式：<code>(let distance, 0)</code> 匹配了在 x 轴上的值，<code>(0, let distance)</code> 匹配了在 y 轴上的值。两个模式都绑定了 <code>distance</code>，并且 <code>distance</code> 在两种模式下，都是整型——这意味着分支体内的代码，只要 case 匹配，都可以获取到 <code>distance</code> 值。</p> <h2 id="控制转移语句"><a href="#控制转移语句" class="header-anchor">#</a> 控制转移语句</h2> <p>控制转移语句改变你代码的执行顺序，通过它可以实现代码的跳转。Swift 有五种控制转移语句：</p> <ul><li><code>continue</code></li> <li><code>break</code></li> <li><code>fallthrough</code></li> <li><code>return</code></li> <li><code>throw</code></li></ul> <p>我们将会在下面讨论 <code>continue</code>、<code>break</code> 和 <code>fallthrough</code> 语句。<code>return</code> 语句将会在 <a href="/pages/b69d99/">函数</a> 章节讨论，<code>throw</code> 语句会在 <a href="/pages/cc5b2d/">错误处理</a> 章节讨论。</p> <h3 id="continue"><a href="#continue" class="header-anchor">#</a> Continue</h3> <p><code>continue</code> 语句告诉一个循环体立刻停止本次循环，重新开始下次循环。就好像在说“本次循环我已经执行完了”，但是并不会离开整个循环体。</p> <p>下面的例子把一个小写字符串中的元音字母和空格字符移除，生成了一个含义模糊的短句：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> puzzleInput <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;great minds think alike&quot;</span></span>
<span class="token keyword">var</span> puzzleOutput <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;&quot;</span></span>
<span class="token keyword">for</span> character <span class="token keyword">in</span> puzzleInput <span class="token punctuation">{</span>
    <span class="token keyword">switch</span> character <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;a&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;e&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;i&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;o&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;u&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot; &quot;</span></span><span class="token punctuation">:</span>
        <span class="token keyword">continue</span><span class="token label important">
    default</span><span class="token punctuation">:</span>
        puzzleOutput<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>character<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span>puzzleOutput<span class="token punctuation">)</span>
    <span class="token comment">// 输出“grtmndsthnklk”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>在上面的代码中，只要匹配到元音字母或者空格字符，就调用 <code>continue</code> 语句，使本次循环结束，重新开始下次循环。这种行为使 <code>switch</code> 匹配到元音字母和空格字符时不做处理，而不是让每一个匹配到的字符都被打印。</p> <h3 id="break"><a href="#break" class="header-anchor">#</a> Break</h3> <p><code>break</code> 语句会立刻结束整个控制流的执行。<code>break</code> 可以在 <code>switch</code> 或循环语句中使用，用来提前结束 <code>switch</code> 或循环语句。</p> <h4 id="循环语句中的-break"><a href="#循环语句中的-break" class="header-anchor">#</a> 循环语句中的 break</h4> <p>当在一个循环体中使用 <code>break</code> 时，会立刻中断该循环体的执行，然后跳转到表示循环体结束的大括号（<code>}</code>）后的第一行代码。不会再有本次循环的代码被执行，也不会再有下次的循环产生。</p> <h4 id="switch-语句中的-break"><a href="#switch-语句中的-break" class="header-anchor">#</a> Switch 语句中的 break</h4> <p>当在一个 <code>switch</code> 代码块中使用 <code>break</code> 时，会立即中断该 <code>switch</code> 代码块的执行，并且跳转到表示 <code>switch</code> 代码块结束的大括号（<code>}</code>）后的第一行代码。</p> <p>这种特性可以被用来匹配或者忽略一个或多个分支。因为 Swift 的 <code>switch</code> 需要包含所有的分支而且不允许有为空的分支，有时为了使你的意图更明显，需要特意匹配或者忽略某个分支。那么当你想忽略某个分支时，可以在该分支内写上 <code>break</code> 语句。当那个分支被匹配到时，分支内的 <code>break</code> 语句立即结束 <code>switch</code> 代码块。</p> <blockquote><p>注意</p> <p>当一个 <code>switch</code> 分支仅仅包含注释时，会被报编译时错误。注释不是代码语句而且也不能让 <code>switch</code> 分支达到被忽略的效果。你应该使用 <code>break</code> 来忽略某个分支。</p></blockquote> <p>下面的例子通过 <code>switch</code> 来判断一个 <code>Character</code> 值是否代表下面四种语言之一。为了简洁，多个值被包含在了同一个分支情况中。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> numberSymbol<span class="token punctuation">:</span> <span class="token class-name">Character</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;三&quot;</span></span>  <span class="token comment">// 简体中文里的数字 3</span>
<span class="token keyword">var</span> possibleIntegerValue<span class="token punctuation">:</span> <span class="token class-name">Int</span><span class="token operator">?</span>
<span class="token keyword">switch</span> numberSymbol <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;1&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;١&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;一&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;๑&quot;</span></span><span class="token punctuation">:</span>
    possibleIntegerValue <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;2&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;٢&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;二&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;๒&quot;</span></span><span class="token punctuation">:</span>
    possibleIntegerValue <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;3&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;٣&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;三&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;๓&quot;</span></span><span class="token punctuation">:</span>
    possibleIntegerValue <span class="token operator">=</span> <span class="token number">3</span>
<span class="token keyword">case</span> <span class="token string-literal"><span class="token string">&quot;4&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;٤&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;四&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;๔&quot;</span></span><span class="token punctuation">:</span>
    possibleIntegerValue <span class="token operator">=</span> <span class="token number">4</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    <span class="token keyword">break</span>
<span class="token punctuation">}</span>
<span class="token keyword">if</span> <span class="token keyword">let</span> integerValue <span class="token operator">=</span> possibleIntegerValue <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;The integer value of </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numberSymbol</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">integerValue</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;An integer value could not be found for </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">numberSymbol</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// 输出“The integer value of 三 is 3.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>这个例子检查 <code>numberSymbol</code> 是否是拉丁，阿拉伯，中文或者泰语中的 <code>1</code> 到 <code>4</code> 之一。如果被匹配到，该 <code>switch</code> 分支语句给 <code>Int?</code> 类型变量 <code>possibleIntegerValue</code> 设置一个整数值。</p> <p>当 <code>switch</code> 代码块执行完后，接下来的代码通过使用可选绑定来判断 <code>possibleIntegerValue</code> 是否曾经被设置过值。因为是可选类型的缘故，<code>possibleIntegerValue</code> 有一个隐式的初始值 <code>nil</code>，所以仅仅当 <code>possibleIntegerValue</code> 曾被 <code>switch</code> 代码块的前四个分支中的某个设置过一个值时，可选的绑定才会被判定为成功。</p> <p>在上面的例子中，想要把 <code>Character</code> 所有的的可能性都枚举出来是不现实的，所以使用 <code>default</code> 分支来包含所有上面没有匹配到字符的情况。由于这个 <code>default</code> 分支不需要执行任何动作，所以它只写了一条 <code>break</code> 语句。一旦落入到 <code>default</code> 分支中后，<code>break</code> 语句就完成了该分支的所有代码操作，代码继续向下，开始执行 <code>if let</code> 语句。</p> <h3 id="贯穿（fallthrough）"><a href="#贯穿（fallthrough）" class="header-anchor">#</a> 贯穿（Fallthrough）</h3> <p>在 Swift 里，<code>switch</code> 语句不会从上一个 case 分支跳转到下一个 case 分支中。相反，只要第一个匹配到的 case 分支完成了它需要执行的语句，整个 <code>switch</code> 代码块完成了它的执行。相比之下，C 语言要求你显式地插入 <code>break</code> 语句到每个 case 分支的末尾来阻止自动落入到下一个 case 分支中。Swift 的这种避免默认落入到下一个分支中的特性意味着它的 <code>switch</code> 功能要比 C 语言的更加清晰和可预测，可以避免无意识地执行多个 case 分支从而引发的错误。</p> <p>如果你确实需要 C 风格的贯穿的特性，你可以在每个需要该特性的 case 分支中使用 <code>fallthrough</code> 关键字。下面的例子使用 <code>fallthrough</code> 来创建一个数字的描述语句。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> integerToDescribe <span class="token operator">=</span> <span class="token number">5</span>
<span class="token keyword">var</span> description <span class="token operator">=</span> <span class="token string-literal"><span class="token string">&quot;The number </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">integerToDescribe</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string"> is&quot;</span></span>
<span class="token keyword">switch</span> integerToDescribe <span class="token punctuation">{</span>
<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">11</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">,</span> <span class="token number">17</span><span class="token punctuation">,</span> <span class="token number">19</span><span class="token punctuation">:</span>
    description <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">&quot; a prime number, and also&quot;</span></span>
    <span class="token keyword">fallthrough</span>
<span class="token keyword">default</span><span class="token punctuation">:</span>
    description <span class="token operator">+=</span> <span class="token string-literal"><span class="token string">&quot; an integer.&quot;</span></span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span>description<span class="token punctuation">)</span>
<span class="token comment">// 输出“The number 5 is a prime number, and also an integer.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>这个例子定义了一个 <code>String</code> 类型的变量 <code>description</code> 并且给它设置了一个初始值。函数使用 <code>switch</code> 逻辑来判断 <code>integerToDescribe</code> 变量的值。当 <code>integerToDescribe</code> 的值属于列表中的质数之一时，该函数在 <code>description</code> 后添加一段文字，来表明这个数字是一个质数。然后它使用 <code>fallthrough</code> 关键字来“贯穿”到 <code>default</code> 分支中。<code>default</code> 分支在 <code>description</code> 的最后添加一段额外的文字，至此 <code>switch</code> 代码块执行完了。</p> <p>如果 <code>integerToDescribe</code> 的值不属于列表中的任何质数，那么它不会匹配到第一个 <code>switch</code> 分支。而这里没有其他特别的分支情况，所以 <code>integerToDescribe</code> 匹配到 <code>default</code> 分支中。</p> <p>当 <code>switch</code> 代码块执行完后，使用 <code>print(_:separator:terminator:)</code> 函数打印该数字的描述。在这个例子中，数字 <code>5</code> 被准确的识别为了一个质数。</p> <blockquote><p>注意</p> <p><code>fallthrough</code> 关键字不会检查它下一个将会落入执行的 case 中的匹配条件。<code>fallthrough</code> 简单地使代码继续连接到下一个 case 中的代码，这和 C 语言标准中的 <code>switch</code> 语句特性是一样的。</p></blockquote> <h3 id="带标签的语句"><a href="#带标签的语句" class="header-anchor">#</a> 带标签的语句</h3> <p>在 Swift 中，你可以在循环体和条件语句中嵌套循环体和条件语句来创造复杂的控制流结构。并且，循环体和条件语句都可以使用 <code>break</code> 语句来提前结束整个代码块。因此，显式地指明 <code>break</code> 语句想要终止的是哪个循环体或者条件语句，会很有用。类似地，如果你有许多嵌套的循环体，显式指明 <code>continue</code> 语句想要影响哪一个循环体也会非常有用。</p> <p>为了实现这个目的，你可以使用标签（<em>statement label</em>）来标记一个循环体或者条件语句，对于一个条件语句，你可以使用 <code>break</code> 加标签的方式，来结束这个被标记的语句。对于一个循环语句，你可以使用 <code>break</code> 或者 <code>continue</code> 加标签，来结束或者继续这条被标记语句的执行。</p> <p>声明一个带标签的语句是通过在该语句的关键词的同一行前面放置一个标签，作为这个语句的前导关键字（introducor keyword），并且该标签后面跟随一个冒号。下面是一个针对 <code>while</code> 循环体的标签语法，同样的规则适用于所有的循环体和条件语句。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code> label <span class="token label important">name</span><span class="token punctuation">:</span> <span class="token keyword">while</span> condition <span class="token punctuation">{</span>
     statements
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面的例子是前面章节中<em>蛇和梯子</em>的适配版本，在此版本中，我们将使用一个带有标签的 <code>while</code> 循环体中调用 <code>break</code> 和 <code>continue</code> 语句。这次，游戏增加了一条额外的规则：</p> <ul><li>为了获胜，你必须<em>刚好</em>落在第 25 个方块中。</li></ul> <p>如果某次掷骰子使你的移动超出第 25 个方块，你必须重新掷骰子，直到你掷出的骰子数刚好使你能落在第 25 个方块中。</p> <p>游戏的棋盘和之前一样：</p> <p><img src="https://cdn.jsdelivr.net/gh/zhmbo/static@master/img/20201110183152.png" alt="img"></p> <p>image</p> <p><code>finalSquare</code>、<code>board</code>、<code>square</code> 和 <code>diceRoll</code> 值被和之前一样的方式初始化：</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">let</span> finalSquare <span class="token operator">=</span> <span class="token number">25</span>
<span class="token keyword">var</span> board <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token class-name">Int</span><span class="token punctuation">]</span><span class="token punctuation">(</span>repeating<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span> count<span class="token punctuation">:</span> finalSquare <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>
board<span class="token punctuation">[</span><span class="token number">03</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">08</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">06</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">09</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">09</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">10</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">+</span><span class="token number">02</span>
board<span class="token punctuation">[</span><span class="token number">14</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">10</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">19</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">11</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">22</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">02</span><span class="token punctuation">;</span> board<span class="token punctuation">[</span><span class="token number">24</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">08</span>
<span class="token keyword">var</span> square <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">var</span> diceRoll <span class="token operator">=</span> <span class="token number">0</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>这个版本的游戏使用 <code>while</code> 循环和 <code>switch</code> 语句来实现游戏的逻辑。<code>while</code> 循环有一个标签名 <code>gameLoop</code>，来表明它是游戏的主循环。</p> <p>该 <code>while</code> 循环体的条件判断语句是 <code>while square !=finalSquare</code>，这表明你必须刚好落在方格25中。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token label important">gameLoop</span><span class="token punctuation">:</span> <span class="token keyword">while</span> square <span class="token operator">!=</span> finalSquare <span class="token punctuation">{</span>
    diceRoll <span class="token operator">+=</span> <span class="token number">1</span>
    <span class="token keyword">if</span> diceRoll <span class="token operator">==</span> <span class="token number">7</span> <span class="token punctuation">{</span> diceRoll <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">}</span>
    <span class="token keyword">switch</span> square <span class="token operator">+</span> diceRoll <span class="token punctuation">{</span>
    <span class="token keyword">case</span> finalSquare<span class="token punctuation">:</span>
        <span class="token comment">// 骰子数刚好使玩家移动到最终的方格里，游戏结束。</span>
        <span class="token keyword">break</span><span class="token label important"> gameLoop</span>
    <span class="token keyword">case</span> <span class="token keyword">let</span> newSquare <span class="token keyword">where</span> newSquare <span class="token operator">&gt;</span> finalSquare<span class="token punctuation">:</span>
        <span class="token comment">// 骰子数将会使玩家的移动超出最后的方格，那么这种移动是不合法的，玩家需要重新掷骰子</span>
        <span class="token keyword">continue</span><span class="token label important"> gameLoop</span>
    <span class="token keyword">default</span><span class="token punctuation">:</span>
        <span class="token comment">// 合法移动，做正常的处理</span>
        square <span class="token operator">+=</span> diceRoll
        square <span class="token operator">+=</span> board<span class="token punctuation">[</span>square<span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Game over!&quot;</span></span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>每次循环迭代开始时掷骰子。与之前玩家掷完骰子就立即移动不同，这里使用了 <code>switch</code> 语句来考虑每次移动可能产生的结果，从而决定玩家本次是否能够移动。</p> <ul><li>如果骰子数刚好使玩家移动到最终的方格里，游戏结束。<code>break gameLoop</code> 语句跳转控制去执行 <code>while</code> 循环体后的第一行代码，意味着游戏结束。</li> <li>如果骰子数将会使玩家的移动超出最后的方格，那么这种移动是不合法的，玩家需要重新掷骰子。<code>continue gameLoop</code> 语句结束本次 <code>while</code> 循环，开始下一次循环。</li> <li>在剩余的所有情况中，骰子数产生的都是合法的移动。玩家向前移动 <code>diceRoll</code> 个方格，然后游戏逻辑再处理玩家当前是否处于蛇头或者梯子的底部。接着本次循环结束，控制跳转到 <code>while</code> 循环体的条件判断语句处，再决定是否需要继续执行下次循环。</li></ul> <blockquote><p>注意</p> <p>如果上述的 <code>break</code> 语句没有使用 <code>gameLoop</code> 标签，那么它将会中断 <code>switch</code> 语句而不是 <code>while</code> 循环。使用 <code>gameLoop</code> 标签清晰的表明了 <code>break</code> 想要中断的是哪个代码块。</p> <p>同时请注意，当调用 <code>continue gameLoop</code> 去跳转到下一次循环迭代时，这里使用 <code>gameLoop</code> 标签并不是严格必须的。因为在这个游戏中，只有一个循环体，所以 <code>continue</code> 语句会影响到哪个循环体是没有歧义的。然而，<code>continue</code> 语句使用 <code>gameLoop</code> 标签也是没有危害的。这样做符合标签的使用规则，同时参照旁边的 <code>break gameLoop</code>，能够使游戏的逻辑更加清晰和易于理解。</p></blockquote> <h2 id="提前退出"><a href="#提前退出" class="header-anchor">#</a> 提前退出</h2> <p>像 <code>if</code> 语句一样，<code>guard</code> 的执行取决于一个表达式的布尔值。我们可以使用 <code>guard</code> 语句来要求条件必须为真时，以执行 <code>guard</code> 语句后的代码。不同于 <code>if</code> 语句，一个 <code>guard</code> 语句总是有一个 <code>else</code> 从句，如果条件不为真则执行 <code>else</code> 从句中的代码。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">func</span> <span class="token function-definition function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token class-name">String</span><span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">guard</span> <span class="token keyword">let</span> name <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>


    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;Hello </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">name</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">!&quot;</span></span><span class="token punctuation">)</span>


    <span class="token keyword">guard</span> <span class="token keyword">let</span> location <span class="token operator">=</span> person<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;location&quot;</span></span><span class="token punctuation">]</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;I hope the weather is nice near you.&quot;</span></span><span class="token punctuation">)</span>
        <span class="token keyword">return</span>
    <span class="token punctuation">}</span>


    <span class="token function">print</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">&quot;I hope the weather is nice in </span><span class="token interpolation-punctuation punctuation">\(</span><span class="token interpolation">location</span><span class="token interpolation-punctuation punctuation">)</span><span class="token string">.&quot;</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>


<span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;John&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 输出“Hello John!”</span>
<span class="token comment">// 输出“I hope the weather is nice near you.”</span>
<span class="token function">greet</span><span class="token punctuation">(</span>person<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string-literal"><span class="token string">&quot;name&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Jane&quot;</span></span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">&quot;location&quot;</span></span><span class="token punctuation">:</span> <span class="token string-literal"><span class="token string">&quot;Cupertino&quot;</span></span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token comment">// 输出“Hello Jane!”</span>
<span class="token comment">// 输出“I hope the weather is nice in Cupertino.”</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><p>如果 <code>guard</code> 语句的条件被满足，则继续执行 <code>guard</code> 语句大括号后的代码。将变量或者常量的可选绑定作为 <code>guard</code> 语句的条件，都可以保护 <code>guard</code> 语句后面的代码。</p> <p>如果条件不被满足，在 <code>else</code> 分支上的代码就会被执行。这个分支必须转移控制以退出 <code>guard</code> 语句出现的代码段。它可以用控制转移语句如 <code>return</code>、<code>break</code>、<code>continue</code> 或者 <code>throw</code> 做这件事，或者调用一个不返回的方法或函数，例如 <code>fatalError()</code>。</p> <p>相比于可以实现同样功能的 <code>if</code> 语句，按需使用 <code>guard</code> 语句会提升我们代码的可读性。它可以使你的代码连贯的被执行而不需要将它包在 <code>else</code> 块中，它可以使你在紧邻条件判断的地方，处理违规的情况。</p> <h2 id="检测-api-可用性"><a href="#检测-api-可用性" class="header-anchor">#</a> 检测 API 可用性</h2> <p>Swift 内置支持检查 API 可用性，这可以确保我们不会在当前部署机器上，不小心地使用了不可用的 API。</p> <p>编译器使用 SDK 中的可用信息来验证我们的代码中使用的所有 API 在项目指定的部署目标上是否可用。如果我们尝试使用一个不可用的 API，Swift 会在编译时报错。</p> <p>我们在 <code>if</code> 或 <code>guard</code> 语句中使用 <code>可用性条件（availability condition)</code>去有条件的执行一段代码，来在运行时判断调用的 API 是否可用。编译器使用从可用性条件语句中获取的信息去验证，在这个代码块中调用的 API 是否可用。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">if</span> <span class="token other-directive property">#available</span><span class="token punctuation">(</span>iOS <span class="token number">10</span><span class="token punctuation">,</span> macOS <span class="token number">10.12</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 在 iOS 使用 iOS 10 的 API, 在 macOS 使用 macOS 10.12 的 API</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用先前版本的 iOS 和 macOS 的 API</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>以上可用性条件指定，<code>if</code> 语句的代码块仅仅在 iOS 10 或 macOS 10.12 及更高版本才运行。最后一个参数，<code>*</code>，是必须的，用于指定在所有其它平台中，如果版本号高于你的设备指定的最低版本，if 语句的代码块将会运行。</p> <p>在它一般的形式中，可用性条件使用了一个平台名字和版本的列表。平台名字可以是 <code>iOS</code>，<code>macOS</code>，<code>watchOS</code> 和 <code>tvOS</code>——请访问 <a href="/pages/629202/#声明特性">声明特性</a> 来获取完整列表。除了指定像 iOS 8 或 macOS 10.10 的大版本号，也可以指定像 iOS 11.2.6 以及 macOS 10.13.3 的小版本号。</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">if</span> <span class="token other-directive property">#available</span><span class="token punctuation">(</span>平台名称 版本号<span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">APIs</span> 可用，语句将执行
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token class-name">APIs</span> 不可用，语句将不执行
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div></div> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/07/30, 18:07:00</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/4b4c78/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">集合类型</div></a> <a href="/pages/b69d99/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">函数</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/4b4c78/" class="prev">集合类型</a></span> <span class="next"><a href="/pages/b69d99/">函数</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/742912/"><div>Homebrew+RVM+Ruby+CocoaPods</div></a> <span>11-23</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/81af2e/"><div>iOS13生命周期</div></a> <span>11-14</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/258164/"><div>《Swift编程语言》- 语法总结</div></a> <span>11-11</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div> <div class="comments-wrapper"><!----></div> </main></div> <!----> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">跟随系统</li><li class="iconfont icon-rijianmoshi">浅色模式</li><li class="iconfont icon-yejianmoshi">深色模式</li><li class="iconfont icon-yuedu">阅读模式</li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;filter:grayscale(100%);"></div> <!----> <div></div></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.f91ba302.js" defer></script><script src="/assets/js/2.dd713b59.js" defer></script><script src="/assets/js/3.069de0ac.js" defer></script><script src="/assets/js/17.b3336126.js" defer></script>
  </body>
</html>